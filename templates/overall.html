{% extends "layout.html" %}

{% block content %}

<center><legend class="border-bottom mb-4 h1"> {{ header }} </legend></center>

{% for key,value in analysis.items() %}
<div class="container">
    <div class="row">
        <div class="col">
            <h2 style="text-align:center">{{key}} : {{value}}</h4>
        </div>
    </div>
</div>
{% endfor %}
<br>
<center><h4 class="border-bottom mb-4 h1"> Participating countries over the years  </h4></center>
<div id="chart1" class="chart1"></div>

<center><h4 class="border-bottom mb-4 h1"> Events over the time </h4></center>
<div id="chart2" class="chart2"></div>

<center><h4 class="border-bottom mb-4 h1"> Athletes over the time </h4></center>
<div id="chart3" class="chart3"></div>

<center><h4 class="border-bottom mb-4 h1"> Number of events over time(Every Sport) </h4></center>
<center><img src="static/heatmap.png" alt="Italian Trulli"></center>
<br>

<center><h4 class="border-bottom mb-4 h1"> Most Successful Athletes </h4></center>

<div class="content-section">
    <form method="POST" action="">
        <fieldset class="form-group">
            {{ form.hidden_tag() }}
            <div class="form-group">
                {{ form.Sport.label(class="form-control-label") }}
                {% if form.Sport.errors %}
                {{ form.Sport(class="form-control form-control-lg is-invalid") }}
                <div class='invalid-feedback'>
                    {% for error in form.Sport.errors %}
                    <span> {{ error }}</span>
                    {% endfor %}
                </div>
                {% else %}
                {{ form.Sport(class="form-control form-control-lg") }}
                {% endif %}
            </div>
        </fieldset>
        <br>
        <center>
            <div class="form-group">
                {{ form.submit(class="btn btn-dark") }}
            </div>
        </center>
    </form>

</div>

<table class="table table-dark table-hover">
    <thead>
        <tr>
            <th style="text-align:center" scope="col">Name</th>
            <th style="text-align:center" scope="col">Medal</th>
            <th style="text-align:center" scope="col">Sport</th>
            <th style="text-align:center" scope="col">Region</th>

        </tr>
    </thead>
    <tbody>
        {% for key,value in successful_athletes.iterrows() %}
        <tr>
            <td style="text-align:center">{{ value['Name'] }}</td>
            <td style="text-align:center">{{ value['Medals'] }}</td>
            <td style="text-align:center">{{ value['Sport'] }}</td>
            <td style="text-align:center">{{ value['region'] }}</td>
        </tr>
        {% endfor %}

    </tbody>
</table>









<script type="text/javascript">
    var graphs1 = {{ graph1JSON | safe}};
    Plotly.plot("chart1", graphs1, {});

    var graphs2 = {{ graph2JSON | safe}};
    Plotly.plot("chart2", graphs2, {});

    var graphs3 = {{ graph3JSON | safe}};
    Plotly.plot("chart3", graphs3, {});

</script>
{% endblock content %}

